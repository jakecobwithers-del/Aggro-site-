<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP — Donate</title>

  <!-- preload font -->
  <link rel="preload" href="28%20Days%20Later.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <style>
    @font-face{
      font-family:'DayZFont';
      src: url('28%20Days%20Later.ttf') format('truetype');
      font-display: swap;
    }

    :root{
      --bg:#000;
      --accent:#ff3b3b;
      --card-dark:#070707;
      --card-dark-2:#0f0f0f;
      --radius:12px;
      --smoke-opacity:0.66;
      --max-width:900px;
      --pad:22px;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:#fff;
      font-family:"Segoe UI",system-ui,-apple-system,"Helvetica Neue",Arial;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }

    /* Smoke background (same approach as rules page) */
    #smoke-bg{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      overflow:hidden;
      background:#000;
    }
    #smoke-bg video{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:160vw;
      height:160vh;
      object-fit:cover;
      opacity:var(--smoke-opacity);
      /* lighter blur so it doesn't go 'blue' but keeps the soft cinematic feel */
      filter: blur(1.5px) saturate(1.02) contrast(1.02);
    }

    /* Content wrapper */
    .page{
      position:relative;
      z-index:2;
      min-height:100vh;
      padding:40px 20px;
      display:flex;
      justify-content:center;
      align-items:flex-start;
    }
    .wrap{
      width:100%;
      max-width:var(--max-width);
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    /* Heading with red blobs behind it (matches rules vibe but distinct) */
    header{text-align:center; position:relative;}
    .heading-wrap{display:inline-block; position:relative; padding:12px 20px; border-radius:14px;}
    h1{
      margin:0;
      font-family:'DayZFont',sans-serif;
      font-size:clamp(30px,6vw,64px);
      color:#fff;
      text-transform:uppercase;
      letter-spacing:1.6px;
      z-index:3;
      position:relative;
    }
    /* red blob behind heading */
    .red-blob {
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width:460px;
      height:120px;
      background: radial-gradient(ellipse at center, rgba(255,59,59,0.18) 0%, rgba(255,59,59,0.10) 30%, transparent 60%);
      filter: blur(26px);
      z-index:1;
      pointer-events:none;
      border-radius:40%;
    }

    /* Cards */
    .card{
      background:linear-gradient(180deg,var(--card-dark),var(--card-dark-2));
      border-radius:var(--radius);
      border:2px solid rgba(255,59,59,0.12);
      padding:var(--pad);
      box-shadow:inset 0 2px 6px rgba(255,255,255,0.02),
                 inset 0 -8px 18px rgba(0,0,0,0.75),
                 0 12px 30px rgba(0,0,0,0.9);
    }
    .card h2{margin:0 0 8px 0;font-family:'DayZFont',sans-serif;color:var(--accent);font-size:clamp(18px,3.2vw,26px);letter-spacing:.8px;text-transform:uppercase;}
    .card p{margin:0 0 12px 0;color:rgba(255,255,255,0.94);line-height:1.6;font-size:15px;}
    .card ul{margin:8px 0 0 16px;padding:0;color:rgba(255,255,255,0.92);}

    /* Donate button */
    .donate-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;}
    .donate-btn{
      display:inline-block;margin-top:6px;padding:12px 22px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#b61f1f);
      color:#fff;font-weight:900;text-decoration:none;border:2px solid rgba(255,255,255,0.04);
      box-shadow:0 8px 30px rgba(200,0,0,0.14);
    }
    .donate-btn:active{transform:translateY(1px) scale(.995)}

    /* small CTA ghost */
    .ghost{
      display:inline-block;padding:10px 16px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:rgba(255,255,255,0.9);text-decoration:none;font-weight:800;
    }

    /* back link (same style as rules page) */
    .back-row{display:flex;justify-content:center;margin-top:12px;}
    .back-link{
      text-decoration:none;
      font-weight:800;
      background:linear-gradient(180deg,var(--card-dark),var(--card-dark-2));
      border:2px solid rgba(255,59,59,0.14);
      color:var(--accent);
      padding:12px 18px;
      border-radius:12px;
      box-shadow:inset 0 2px 6px rgba(255,255,255,0.02),
                 inset 0 -8px 18px rgba(0,0,0,0.75),
                 0 10px 30px rgba(0,0,0,0.9);
    }

    /* small responsive tweaks */
    @media (max-width:520px){
      .wrap{padding:0 6px}
      .red-blob{width:320px;height:96px;filter:blur(22px)}
      .card{padding:14px}
      .donate-btn{width:100%}
    }
  </style>
</head>
<body>

  <!-- Smoke background (keeps background like rules page) -->
  <div id="smoke-bg" aria-hidden="true">
    <video autoplay loop muted playsinline preload="auto" poster="smoke-poster.jpg">
      <source src="Smoke.webm" type="video/webm">
      <source src="Smoke.mp4" type="video/mp4">
    </video>
  </div>

  <main class="page" role="main">
    <div class="wrap">

      <header role="banner" aria-label="Aggro PvP Donate">
        <div class="heading-wrap" aria-hidden="true">
          <div class="red-blob" aria-hidden="true"></div>
          <h1>Donate</h1>
        </div>
      </header>

      <!-- Why donate -->
      <section class="card" aria-labelledby="why-donate">
        <h2 id="why-donate">Why Donate?</h2>
        <p>Running Aggro PvP takes time, effort, and real-world costs. Donations help keep the server online, pay for hosting, add new mods, and develop fresh content.</p>
      </section>

      <!-- How it helps -->
      <section class="card" aria-labelledby="how-it-helps">
        <h2 id="how-it-helps">How It Helps</h2>
        <ul>
          <li>Server hosting and performance upgrades</li>
          <li>Development of custom mods & events</li>
          <li>Visuals, UI, and branding</li>
          <li>Community prizes and events</li>
        </ul>
      </section>

      <!-- Donation action (keeps your audio behaviour) -->
      <section class="card" aria-labelledby="how-to-donate">
        <h2 id="how-to-donate">How to Donate</h2>
        <p>If you’d like to support us, click the button below. Every bit helps keep Aggro PvP alive and improving.</p>
        <div class="donate-row">
          <a class="donate-btn" href="YOUR_DONATION_LINK_HERE" aria-label="Donate to Aggro PvP">Donate Now</a>
          <a class="ghost" href="mailto:admin@aggropvp.example?subject=Donation%20help" aria-label="Contact for donation help">Need help donating?</a>
        </div>
      </section>

      <!-- Optional tiers / quick info -->
      <section class="card" aria-labelledby="tiers">
        <h2 id="tiers">Donation Tiers</h2>
        <p style="margin-bottom:8px;color:rgba(255,255,255,0.9)">Suggested tiers to reward contributors.</p>
        <ul>
          <li><strong>Supporter — $5+</strong> Priority queue token, Discord thanks.</li>
          <li><strong>Veteran — $15+</strong> Unique scoreboard tag, seasonal perk.</li>
          <li><strong>Legend — $40+</strong> Owner-signed role, members-only events.</li>
        </ul>
      </section>

      <!-- Back to menu (exact style preserved) -->
      <div class="back-row">
        <a class="back-link" href="index.html" aria-label="Return to main menu">← Return to Main Menu</a>
      </div>

    </div>
  </main>

  <!-- retain your audio UI and robust play/fallback logic -->
  <div id="audio-debug" style="display:none;position:fixed;left:50%;transform:translateX(-50%);top:14vh;background:#a21b1b;color:#fff;padding:10px 14px;border-radius:8px;border:2px solid #600d0d;z-index:9999;font-weight:700;"></div>
  <div id="tap-overlay" style="display:none;position:fixed;inset:0;z-index:9998;cursor:pointer;background:linear-gradient(transparent 70%, rgba(0,0,0,0.35));" aria-hidden="true"></div>
  <div id="tap-hint" style="position:fixed;left:50%;top:18vh;transform:translateX(-50%);z-index:9999;background:rgba(0,0,0,0.6);color:#fff;padding:8px 12px;border-radius:8px;font-weight:700;border:1px solid rgba(255,255,255,0.06);font-size:14px;display:none;">Tap anywhere to enable audio</div>

  <script>
  (function(){
    // CONFIG
    const AUDIO_URL = 'https://jakecobwithers-del.github.io/Aggro-site-/Donate.mp3';
    const START_DELAY_MS = 900;
    const FADE_MS = 700;
    const TARGET_VOL = 0.95;

    // ELEMENTS
    const debug = document.getElementById('audio-debug');
    const overlay = document.getElementById('tap-overlay');
    const hint = document.getElementById('tap-hint');

    // STATE
    let played = false;
    let blobUrl = null;

    // Audio element
    const audio = new Audio(AUDIO_URL);
    audio.preload = 'auto';
    audio.loop = false;
    audio.volume = TARGET_VOL;
    audio.muted = false;
    audio.playsInline = true;
    try { audio.pause(); } catch(_) {}

    // fade helper
    function fadeFromTo(from, to, duration) {
      audio.volume = from;
      const delta = to - from;
      if (duration <= 0 || delta === 0) { audio.volume = to; return; }
      const step = 50;
      const steps = Math.max(1, Math.round(duration / step));
      let i = 0;
      const id = setInterval(() => {
        i++;
        audio.volume = Math.min(1, Math.max(0, from + delta * (i / steps)));
        if (i >= steps) clearInterval(id);
      }, step);
    }

    async function tryPlayAfterDelay() {
      if (played) return;
      await new Promise(r => setTimeout(r, START_DELAY_MS));
      if (played) return;
      try {
        audio.currentTime = 0;
        const p = audio.play();
        if (p && typeof p.then === 'function') {
          await p;
          played = true;
          return;
        } else {
          setTimeout(() => { if (!audio.paused) played = true; else showOverlay(); }, 300);
        }
      } catch (err) {
        showOverlay();
      }
    }

    async function onFirstGesture(e) {
      if (played) return;
      if (e && e.isTrusted === false) return;
      played = true;
      hideOverlay();
      try {
        try {
          audio.currentTime = 0;
          await audio.play();
          return;
        } catch (_) {
          const r = await fetch(AUDIO_URL, { cache: 'no-cache' });
          if (!r.ok) { showDebug('Audio fetch failed: ' + r.status + ' ' + r.statusText); return; }
          const ct = r.headers.get('content-type') || '';
          if (!/audio/i.test(ct)) { showDebug('Wrong Content-Type: ' + ct); return; }
          const b = await r.blob();
          blobUrl = URL.createObjectURL(b);
          audio.src = blobUrl;
          audio.currentTime = 0;
          audio.muted = false;
          audio.volume = 0;
          await audio.play();
          fadeFromTo(0, TARGET_VOL, FADE_MS);
          audio.addEventListener('ended', () => { if (blobUrl) { try { URL.revokeObjectURL(blobUrl); } catch(_){} blobUrl=null; } }, { once:true });
        }
      } catch (err) {
        showDebug('Play failed: ' + (err && err.message ? err.message : String(err)));
      }
    }

    function attachOverlayListeners() {
      overlay.style.display = 'block';
      overlay.setAttribute('aria-hidden','false');
      hint.style.display = 'block';
      window.addEventListener('pointerdown', onFirstGesture, { once:true, passive:true });
      window.addEventListener('keydown', onFirstGesture, { once:true, passive:true });
      window.addEventListener('focus', onFirstGesture, { once:true, passive:true });
    }
    function hideOverlay() {
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
      hint.style.display = 'none';
      window.removeEventListener('pointerdown', onFirstGesture);
      window.removeEventListener('keydown', onFirstGesture);
      window.removeEventListener('focus', onFirstGesture);
    }

    function showOverlay() {
      if (played) return;
      attachOverlayListeners();
      setTimeout(()=>{ if (!played) hideOverlay(); }, 16000);
    }

    function showDebug(msg) {
      debug.textContent = msg;
      debug.style.display = 'block';
    }

    async function headCheck() {
      try {
        const r = await fetch(AUDIO_URL, { method: 'HEAD', cache: 'no-cache' });
        if (!r.ok) { showDebug('Audio HEAD failed: ' + r.status + ' ' + r.statusText); return; }
        const ct = r.headers.get('content-type') || '';
        if (!/audio/i.test(ct)) { showDebug('Wrong Content-Type: ' + ct); return; }
      } catch (err) {
        showDebug('Network check failed: ' + (err && err.message ? err.message : String(err)));
      }
    }

    // Start sequence on load
    window.addEventListener('load', () => {
      tryPlayAfterDelay();
      setTimeout(() => { if (!played) showOverlay(); }, 700);
      setTimeout(headCheck, 200);
    }, { once:true });

    // cleanup blob URL on unload
    window.addEventListener('pagehide', () => { if (blobUrl) try { URL.revokeObjectURL(blobUrl); } catch(_){} blobUrl = null; });
    // expose for console
    window._aggrAudio = { audio, tryPlayAfterDelay, showOverlay, showDebug };
  })();
  </script>
</body>
</html>
