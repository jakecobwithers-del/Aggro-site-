<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Aggro PvP — JOIN THE FIGHT</title>
  <style>
    :root {
      --bg: #050505;
      --red: #ff1a1a;
      --cycle: 4000;       /* full loop ms */
      --text-dur: 3000;    /* text fade duration */
      --circle-dur: 2500;  /* blood circle duration */
      --circle-delay: 500; /* circle delay ms */
      --flash-dur: 600;    /* red-overlay flash duration */

      /* z-layers */
      --z-menu: 4000;      /* menu over smoke */
      --z-cta: 1000;       /* CTA under smoke */
      --z-logo: 1000;      /* logo under smoke */
      --z-smoke: 2000;     /* smoke above logo/CTA */
      --z-head: 3000;      /* text above smoke */
      --z-blood: 3500;     /* blood above text */
      --z-vfx: 4500;       /* flash/flicker top */
    }

    *,*::before,*::after { box-sizing:border-box }
    html,body {
      margin:0; padding:0;
      width:100%; height:100%;
      background:var(--bg); overflow:hidden;
      font-family:"28Days",sans-serif; color:#fff;
    }
    @font-face {
      font-family:"28Days";
      src: url("28%20Days%20Later.ttf") format("truetype");
      font-display:swap;
    }
    button,a { background:none; border:none; cursor:pointer }

    /* Anarchy Menu over smoke */
    .anarchyBtn {
      position: fixed; top:14px; right:14px;
      z-index: var(--z-menu);
    }
    .anarchyBtn img { width:64px; height:64px; }
    .anarchyMenu {
      position: fixed; top:90px; right:14px;
      display: none; flex-direction: column;
      padding:12px; background:rgba(10,10,10,0.95);
      border-radius:12px; z-index:var(--z-menu);
    }
    .anarchyMenu.open { display:flex }
    .anarchyMenu a {
      color:#ffdede; font-size:16px; font-weight:800;
      padding:10px 14px; text-decoration:none;
    }

    /* CTA under smoke */
    .cta {
      position: fixed; bottom:8vh; left:50%;
      transform:translateX(-50%);
      display:flex; gap:20px; z-index:var(--z-cta);
    }
    .cta a {
      font-size:22px; padding:10px 26px;
      border-radius:12px;
      background:linear-gradient(180deg,#151515,#070707);
      color:#fff; text-decoration:none;
      transition:transform .2s;
    }
    .cta a:hover { transform:translateY(-3px) }

    /* Logo under smoke */
    #logo {
      position: fixed; top:6vh; left:50%;
      transform:translateX(-50%); z-index:var(--z-logo);
    }
    #logo img { max-width:30vw; height:auto }

    /* Smoke background */
    #smoke-wrap {
      position: fixed; inset:0; pointer-events:none;
      z-index:var(--z-smoke);
    }
    #smokeVideo {
      width:100%; height:100%;
      object-fit:cover; opacity:.58;
      transition: filter var(--text-dur)ms ease-in-out;
    }
    /* red‐tint class for smoke */
    .smokeTint {
      /* convert to red via sepia+saturate+hue-rotate */
      filter: sepia(1) saturate(10) hue-rotate(-20deg) brightness(1.2);
    }

    /* Red flash overlay */
    #redOverlay {
      position: fixed; inset:0;
      background:var(--red);
      opacity:0; mix-blend-mode:screen;
      pointer-events:none; z-index:var(--z-vfx);
      animation-fill-mode:both;
    }
    @keyframes redFlash {
      0%   { opacity:0 }
      10%  { opacity:.4 }
      30%  { opacity:0 }
      100% { opacity:0 }
    }

    /* VFX flicker */
    .vfx {
      position:fixed; inset:0; pointer-events:none;
      z-index:var(--z-vfx);
    }
    .vfx .flicker {
      position:absolute; inset:0;
      mix-blend-mode:screen; opacity:0;
    }

    /* Headline text */
    #headline {
      position: fixed; top:42vh; left:50%;
      transform:translateX(-50%); text-align:center;
      z-index:var(--z-head); pointer-events:none;
    }
    #headlineText {
      font-size:clamp(48px,14vw,136px);
      line-height:.9; letter-spacing:.12em;
      opacity:0; position:relative; will-change:opacity;
    }
    @keyframes textFade {
      0%,10%   { opacity:0 }
      20%,80%  { opacity:1 }
      100%     { opacity:0 }
    }
    .fadeText {
      animation:textFade var(--text-dur)ms both;
    }

    /* Glitch overlay */
    @keyframes glitch {
      0%,100% { clip:rect(0,9999px,0,0) }
      20%     { clip:rect(20px,9999px,40px,0) }
      40%     { clip:rect(50px,9999px,70px,0) }
      60%     { clip:rect(10px,9999px,30px,0) }
      80%     { clip:rect(60px,9999px,80px,0) }
    }
    .glitch, .glitch::before, .glitch::after {
      animation:glitch .6s steps(2) both;
    }
    .glitch::before, .glitch::after {
      content:attr(data-text);
      position:absolute; inset:0;
      mix-blend-mode:screen; opacity:.6;
    }
    .glitch::before { color:#ff4b4b; left:2px }
    .glitch::after  { color:#7fb7ff; left:-2px }

    /* Blood circle */
    #bloodCircle {
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%) scale(0);
      opacity:0;
      width:clamp(200px,40vw,500px);
      pointer-events:none; z-index:var(--z-blood);
      animation-fill-mode:both;
    }
    @keyframes circleAnim {
      0%   { opacity:0;   transform:translate(-50%,-50%) scale(0) }
      20%  { opacity:.6;  transform:translate(-50%,-50%) scale(1) }
      80%  { opacity:.6;  transform:translate(-50%,-50%) scale(1) }
      100% { opacity:0;   transform:translate(-50%,-50%) scale(1.5) }
    }
  </style>
</head>
<body>
  <!-- Menu -->
  <button id="anarchyBtn" class="anarchyBtn"
          aria-controls="anarchyMenu" aria-expanded="false">
    <img src="anarchy.png" alt="Toggle menu"/>
  </button>
  <nav id="anarchyMenu" class="anarchyMenu" role="menu">
    <a href="rules.html">Rules</a>
    <a href="support.html">Support</a>
    <a href="donate.html">Donate</a>
    <a href="killfeed.html">Kill Feed</a>
    <a href="leaderboard.html">Leaderboard</a>
  </nav>

  <!-- CTA under smoke -->
  <div class="cta">
    <a href="steam://connect/YOURSERVERIP">JOIN SERVER</a>
    <a href="https://discord.gg/YOURDISCORD">JOIN COMMUNITY</a>
  </div>

  <!-- Logo under smoke -->
  <div id="logo">
    <img src="Aggro-logo.PNG" alt="Aggro PvP Logo"/>
  </div>

  <!-- Smoke background -->
  <div id="smoke-wrap">
    <video id="smokeVideo" muted autoplay loop playsinline preload="auto">
      <source src="Smoke.mp4" type="video/mp4"/>
    </video>
  </div>

  <!-- Red flash overlay -->
  <div id="redOverlay"></div>

  <!-- VFX flicker -->
  <div class="vfx">
    <div id="vfxFlicker" class="flicker"></div>
  </div>

  <!-- Headline & Blood -->
  <div id="headline">
    <div id="headlineText" data-text="JOIN THE FIGHT">
      JOIN THE FIGHT
    </div>
    <img id="bloodCircle" src="blood1.png" alt="Blood splatter"/>
  </div>

  <script>
  (function(){
    const smoke     = document.getElementById('smokeVideo');
    const red       = document.getElementById('redOverlay');
    const text      = document.getElementById('headlineText');
    const circle    = document.getElementById('bloodCircle');
    const flicker   = document.getElementById('vfxFlicker');
    const rootStyle = getComputedStyle(document.documentElement);
    const cycle     = +rootStyle.getPropertyValue('--cycle');
    const textDur   = +rootStyle.getPropertyValue('--text-dur');
    const flashDur  = +rootStyle.getPropertyValue('--flash-dur');
    let running     = false;

    function restart(el, anim, dur, delay=0) {
      el.style.animation = 'none';
      void el.offsetWidth;
      el.style.animation = `${anim} ${dur}ms ${delay}ms both`;
    }

    function run() {
      if (running) return;
      running = true;

      // red overlay pulse
      restart(red, 'redFlash', flashDur);

      // tint smoke red for entire text duration
      smoke.classList.add('smokeTint');
      setTimeout(() => smoke.classList.remove('smokeTint'), textDur);

      // headline fade + glitch
      restart(text, 'textFade', textDur);
      text.classList.remove('glitch');
      setTimeout(() => text.classList.add('glitch'), 200);

      // blood circle
      restart(circle, 'circleAnim',
              +rootStyle.getPropertyValue('--circle-dur'),
              +rootStyle.getPropertyValue('--circle-delay'));

      // flicker
      flicker.style.opacity = '1';
      setTimeout(() => flicker.style.opacity = '0', flashDur);

      // unlock
      setTimeout(() => running = false, cycle);
    }

    // menu toggle
    document.getElementById('anarchyBtn')
      .addEventListener('click', e => {
        e.stopPropagation();
        const nav = document.getElementById('anarchyMenu');
        const open = nav.classList.toggle('open');
        e.currentTarget.setAttribute('aria-expanded', open);
      });
    document.addEventListener('click', e => {
      if (!e.target.closest('.anarchyBtn') &&
          !e.target.closest('.anarchyMenu')) {
        document.getElementById('anarchyMenu')
                .classList.remove('open');
        document.getElementById('anarchyBtn')
                .setAttribute('aria-expanded', false);
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(run, 400);
      setInterval(run, cycle);
    });
  })();
  </script>
</body>
</html>
