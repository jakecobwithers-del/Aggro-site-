<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP — Server Rules</title>

  <style>
    /* Font (encode spaces in filename) */
    @font-face{
      font-family: 'DayZFont';
      src: url('28%20Days%20Later.ttf') format('truetype');
      font-display: swap;
    }

    :root{
      --bg: #000;
      --accent: #ff3b3b;
      --muted: rgba(255,255,255,0.88);
      --button-dark: #070707;
      --button-dark-2: #0e0e0e;
      --glass: rgba(255,255,255,0.02);
      --max-width: 1100px;
      --radius: 14px;
      --smoke-opacity: 0.66;
      --pop-duration: 320ms;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:#fff;
      font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      -webkit-text-size-adjust:100%;
      overflow-y:auto;
    }

    /* full smoke background */
    #smoke-bg{
      position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;
      background:#000;
    }
    #smoke-bg video{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:160vw; height:160vh; object-fit:cover; opacity:var(--smoke-opacity);
      filter: blur(5.5px) saturate(1.04) contrast(1.02); mix-blend-mode:screen;
    }

    /* site */
    .site{ position:relative; z-index:2; min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:44px 20px; box-sizing:border-box; }

    .wrap{ width:100%; max-width:var(--max-width); display:flex; flex-direction:column; align-items:center; gap:18px; }

    /* Heading — avoid heavy strokes; use crisp shadow and slight outline via layered text-shadow for legibility */
    .heading{ text-align:center; pointer-events:none; margin-top:6px; }
    h1{
      margin:0;
      font-family:'DayZFont', "Segoe UI", sans-serif;
      font-size: clamp(30px, 6.5vw, 64px);
      line-height:0.9;
      color:#fff;
      letter-spacing:1.6px;
      text-transform:uppercase;
      /* layered shadows for contrast without stroke artifacts */
      text-shadow:
        0 1px 0 rgba(0,0,0,0.8),
        0 6px 22px rgba(0,0,0,0.6),
        0 10px 40px rgba(255,59,59,0.05);
      -webkit-font-smoothing:antialiased;
    }
    .lead{ margin-top:8px; color:var(--muted); font-size:14px; max-width:78ch; pointer-events:auto; }

    /* button grid */
    .btn-grid{ width:100%; display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin-top:6px; }

    /* 3D black button with red rim */
    .rule-btn{
      -webkit-appearance:none; appearance:none;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      padding:14px 18px;
      border-radius:12px;
      cursor:pointer;
      color:var(--muted);
      background: linear-gradient(180deg, var(--button-dark), var(--button-dark-2));
      border: 2px solid rgba(255,59,59,0.14);
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,0.02),
        inset 0 -8px 18px rgba(0,0,0,0.75),
        0 10px 30px rgba(0,0,0,0.9);
      transition: transform 180ms cubic-bezier(.2,.9,.2,1), box-shadow 180ms, background 180ms;
      font-weight:800;
      font-family: 'DayZFont', "Segoe UI", sans-serif;
      text-align:left;
      user-select:none;
    }

    .rule-btn .title{ color:var(--accent); font-size:16px; }
    .rule-btn .sub{ color:rgba(255,255,255,0.72); font-size:13px; font-weight:700; }

    /* push/pull 3D press and hover */
    .rule-btn:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 18px 48px rgba(0,0,0,0.9); }
    .rule-btn:active{ transform: translateY(-2px) scale(0.995); box-shadow: 0 8px 22px rgba(0,0,0,0.9); }

    /* focus */
    .rule-btn:focus{ outline: 3px solid rgba(255,59,59,0.14); outline-offset:6px; }

    /* modal (pop) */
    .modal-wrap{
      position:fixed; inset:0; z-index:60; display:none; align-items:center; justify-content:center;
      background: rgba(0,0,0,0.6); backdrop-filter: blur(6px); padding:20px; box-sizing:border-box;
    }

    .modal{
      width:100%; max-width:920px; background: linear-gradient(180deg,#050505,#0b0b0b);
      border-radius:14px; padding:22px; box-sizing:border-box; border:2px solid rgba(255,59,59,0.06);
      box-shadow: 0 28px 90px rgba(0,0,0,0.9);
      transform: translateY(18px) scale(0.98); opacity:0;
      transition: transform var(--pop-duration) cubic-bezier(.2,.9,.25,1), opacity var(--pop-duration);
    }
    .modal.open{ transform: translateY(0) scale(1); opacity:1; }

    .modal h3{ margin:0 0 6px; font-family:'DayZFont', "Segoe UI", sans-serif; color:var(--accent); font-size:20px; letter-spacing:0.6px; }
    .modal p.lead{ margin:0 0 12px; color:var(--muted); font-size:14px; }

    .rules-list{ display:flex; flex-direction:column; gap:10px; margin-top:6px; }
    .rules-list .item{
      background: rgba(255,255,255,0.02); padding:12px; border-radius:10px; border-left:4px solid rgba(255,59,59,0.16);
      font-size:15px; color:rgba(255,255,255,0.96); transform: translateY(10px) scale(0.98); opacity:0;
      transition: transform 260ms cubic-bezier(.2,.9,.2,1), opacity 260ms;
    }
    .rules-list .item.visible{ transform: translateY(0) scale(1); opacity:1; }

    .modal-footer{ display:flex; justify-content:space-between; gap:12px; margin-top:16px; align-items:center; flex-wrap:wrap; }
    .close-btn{
      background: linear-gradient(180deg, #000, #141414); color:var(--accent);
      padding:10px 14px; border-radius:10px; border:1px solid rgba(255,59,59,0.08); cursor:pointer; font-weight:800;
      box-shadow: inset 0 2px 0 rgba(255,255,255,0.02), 0 8px 26px rgba(0,0,0,0.8);
    }
    .close-btn:focus{ outline:3px solid rgba(255,59,59,0.14); outline-offset:4px; }

    /* small screens */
    @media (max-width:520px){
      .rule-btn{ padding:12px; border-radius:10px; }
      .modal{ padding:16px; border-radius:12px; }
    }
  </style>
</head>
<body>

  <!-- smoke background -->
  <div id="smoke-bg" aria-hidden="true">
    <video id="smokeVideo" autoplay loop muted playsinline preload="auto" poster="smoke-poster.jpg" aria-hidden="true">
      <source src="Smoke.webm" type="video/webm">
      <source src="Smoke.mp4?v=1" type="video/mp4">
    </video>
  </div>

  <main class="site" role="main">
    <div class="wrap" role="region" aria-label="Aggro PvP rules chooser">
      <header class="heading">
        <h1>Server Rules</h1>
        <div class="lead">Aggro PvP is not for the weak. Tap or click a section to open its rules.</div>
      </header>

      <div class="btn-grid" role="list">
        <button class="rule-btn" data-section="general" aria-haspopup="dialog" aria-expanded="false">
          <div>
            <div class="title">General</div>
            <div class="sub">Core expectations</div>
          </div>
          <div class="chev">›</div>
        </button>

        <button class="rule-btn" data-section="safezone" aria-haspopup="dialog" aria-expanded="false">
          <div>
            <div class="title">Safezone</div>
            <div class="sub">Behaviour & protection</div>
          </div>
          <div class="chev">›</div>
        </button>

        <button class="rule-btn" data-section="base-building" aria-haspopup="dialog" aria-expanded="false">
          <div>
            <div class="title">Base Building</div>
            <div class="sub">Construction rules</div>
          </div>
          <div class="chev">›</div>
        </button>

        <button class="rule-btn" data-section="storage" aria-haspopup="dialog" aria-expanded="false">
          <div>
            <div class="title">Base Storage Limit</div>
            <div class="sub">Storage caps</div>
          </div>
          <div class="chev">›</div>
        </button>

        <button class="rule-btn" data-section="raiding" aria-haspopup="dialog" aria-expanded="false">
          <div>
            <div class="title">Raiding</div>
            <div class="sub">Raid etiquette</div>
          </div>
          <div class="chev">›</div>
        </button>
      </div>
    </div>
  </main>

  <!-- modal -->
  <div id="modalWrap" class="modal-wrap" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal" class="modal" role="document" tabindex="-1" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Section</h3>
      <p class="lead" id="modalDesc">Description</p>

      <div class="rules-list" id="modalRules" role="list"></div>

      <div class="modal-footer">
        <div style="color:rgba(255,255,255,0.65);font-size:13px;">Last updated: v1</div>
        <button class="close-btn" id="modalClose">Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const sections = {
        general: {
          title: 'General',
          desc: 'Core server expectations.',
          rules: [
            'No external mods, hacks, duping, NVinspect, or glitch movement. Filters and external crosshairs are allowed.',
            'No alt accounts or stream sniping.',
            'No combat logging. Wait 10 minutes after PvP before logging or entering safezone unless the fight couldn’t realistically continue.',
            'If you log into someone else\\'s base or locked room unexpectedly, make a ticket and don’t touch anything—even if it’s your own base post-raid.',
            'Report bugs. Abusing glitches (including de-rendering bases) will be punished.'
          ]
        },
        safezone: {
          title: 'Safezone',
          desc: 'Safezone behaviour and protections.',
          rules: [
            'Unattended dropped items are free game. Otherwise, don’t touch what’s not yours including vehicles.',
            'No safezone camping, blocking, following, or abusing protection. If you kill in self-defense entering/leaving, leave their loot.',
            'Unattended ungaraged vehicles may be deleted after 12 hours.'
          ]
        },
        'base-building': {
          title: 'Base Building',
          desc: 'Construction rules and limits.',
          rules: [
            'One main base + one stash base/FOB per player.',
            'Max 25 code-locked doors/hatches/containers per base.',
            'All areas of your base must be accessible on foot—no loot rooms via windows only.',
            'Build realistically—no unsupported structures or more than two floor kits out from a structure.',
            'BBP kits must not overlap in ways that block access or raid tools.',
            'Mesh and fence kits must be fully constructed.',
            'On municipal buildings, silos, or radio towers, max two floor kits out—don’t block player structures.',
            'Secure your base. Don’t share codes with untrusted players—no compensation for your mistakes.',
            'Note: No base size limit, but don’t abuse it. Staff will notify you if it gets excessive.'
          ]
        },
        storage: {
          title: 'Base Storage Limit',
          desc: 'Storage kit caps.',
          rules: [
            'You’re limited to 20 storage kits per base, plus 5 extra per team member.'
          ]
        },
        raiding: {
          title: 'Raiding',
          desc: 'Raid rules and etiquette.',
          rules: [
            'Alliances are allowed.',
            'No despawning, repairing, or modifying bases during active raids.',
            'Loot can only be dropped if taking the storage kit—don’t despawn unwanted loot.',
            'No combat logging during raids. If IRL forces you to log, say so—don’t log with combat tag.',
            'Don’t abuse hologram/kit placement to raid (one ladder on the floor is allowed).',
            'Glitch methods (fences, punching through windows, missing vehicles, floating entities) are not allowed.',
            'A raid is considered active for 15 minutes after the last use of explosives or raid tools.'
          ]
        }
      };

      const btns = document.querySelectorAll('.rule-btn');
      const modalWrap = document.getElementById('modalWrap');
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalDesc = document.getElementById('modalDesc');
      const modalRules = document.getElementById('modalRules');
      const modalClose = document.getElementById('modalClose');
      let lastFocused = null;

      function openModal(key, btn){
        const s = sections[key];
        if (!s) return;
        modalTitle.textContent = s.title;
        modalDesc.textContent = s.desc;
        modalRules.innerHTML = '';
        s.rules.forEach((r, i) => {
          const div = document.createElement('div');
          div.className = 'item';
          div.setAttribute('role','listitem');
          div.innerHTML = `<strong style="color:${getComputedStyle(document.documentElement).getPropertyValue('--accent')};margin-right:8px;">${i+1}.</strong> ${r}`;
          modalRules.appendChild(div);
        });

        // show modal
        modalWrap.style.display = 'flex';
        requestAnimationFrame(() => {
          modalWrap.classList.add('visible');
          modal.classList.add('open');
          modalWrap.setAttribute('aria-hidden','false');
          // animate rules items sequentially for pop effect
          const items = Array.from(modalRules.children);
          items.forEach((el, idx) => {
            setTimeout(()=> el.classList.add('visible'), idx * 60 + 80);
          });
        });

        lastFocused = btn || document.activeElement;
        modal.setAttribute('tabindex','-1');
        modal.focus();
      }

      function closeModal(){
        // reverse animations
        modal.classList.remove('open');
        const items = Array.from(modalRules.children);
        items.forEach(el => el.classList.remove('visible'));
        modalWrap.setAttribute('aria-hidden','true');
        // fade out then hide
        setTimeout(() => { modalWrap.style.display = 'none'; }, 280);
        if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
      }

      btns.forEach(b=>{
        b.addEventListener('click', (e)=>{
          const key = b.getAttribute('data-section');
          openModal(key, b);
        });
        b.addEventListener('keydown', e=>{
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); b.click(); }
        });
      });

      modalClose.addEventListener('click', closeModal);
      modalWrap.addEventListener('click', e=>{
        if (e.target === modalWrap) closeModal();
      });
      document.addEventListener('keydown', e=>{
        if (e.key === 'Escape') closeModal();
      });

      // video fallback
      const vid = document.getElementById('smokeVideo');
      const bg = document.getElementById('smoke-bg');
      if (vid){
        vid.addEventListener('error', ()=>{ if (bg) bg.style.display = 'none'; }, {passive:true});
        setTimeout(()=> { if (vid.readyState === 0 && bg) bg.style.display = 'none'; }, 2200);
      }

      // reduce smoke opacity on narrow screens
      function adaptOpacity(){
        if (window.innerWidth <= 520) document.documentElement.style.setProperty('--smoke-opacity','0.46');
        else document.documentElement.style.setProperty('--smoke-opacity','0.66');
      }
      adaptOpacity();
      window.addEventListener('resize', adaptOpacity);
    })();
  </script>
</body>
</html>