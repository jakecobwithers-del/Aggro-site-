<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP â€” JOIN THE FIGHT</title>

  <!-- Preload font (adjust path if needed) -->
  <link rel="preload" href="28%20Days%20Later.ttf" as="font" type="font/ttf" crossorigin>

  <style>
    :root{
      --bg:#050505;
      --red:#ff1a1a;
      --cycle:4000;
      --text-dur:3000;
      --flash-dur:600;
      --circle-dur:3000;
      --circle-delay:0;

      --z-menu:6000;
      --z-vfx:4500;
      --z-blood:3500;
      --z-head:3000;
      --z-color:2500;
      --z-smoke:2000;
      --z-cta:1000;
      --z-logo:1000;
    }

    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;width:100%;margin:0;padding:0;background:var(--bg);overflow:hidden;color:#fff;font-family:"28Days",Impact,sans-serif}

    @font-face{
      font-family:"28Days";
      src:url("28%20Days%20Later.ttf") format("truetype");
      font-display:swap;
    }

    /* Basic controls */
    button,a{background:none;border:none;cursor:pointer;color:inherit;text-decoration:none;padding:0}

    /* MENU button restored to original simple image style */
    .anarchyBtn{
      position:fixed;top:14px;right:14px;z-index:var(--z-menu);pointer-events:auto;
      background:transparent;border:0;padding:0;
      width:64px;height:64px;
    }
    .anarchyBtn img{width:64px;height:64px;display:block}

    .anarchyMenu{
      position:fixed;top:90px;right:14px;display:none;flex-direction:column;
      padding:12px;background:rgba(10,10,10,0.95);
      border-radius:12px;z-index:var(--z-menu);pointer-events:auto;min-width:160px;
    }
    .anarchyMenu.open{display:flex}
    .anarchyMenu a{
      color:#ffdede;font-size:16px;font-weight:800;padding:10px 14px;border-radius:8px;margin:6px 0;
      transition:background .12s,transform .12s,text-shadow .12s;
    }
    .anarchyMenu a:hover{
      background:rgba(255,26,26,0.06);transform:translateX(6px);
      text-shadow:0 0 6px rgba(255,26,26,.25);
    }

    /* CTA & LOGO */
    .cta{
      position:fixed;bottom:6vh;left:50%;transform:translateX(-50%);display:flex;gap:16px;z-index:var(--z-cta);pointer-events:auto;
    }
    .cta a{
      font-size:18px;padding:12px 22px;border-radius:12px;background:linear-gradient(180deg,#151515,#070707);
      color:#fff;font-weight:800;letter-spacing:.06em;transition:transform .12s,box-shadow .12s,background .12s;
      will-change:transform,box-shadow;
    }
    /* stronger pop on hover baseline */
    .cta a:hover{transform:translateY(-4px);box-shadow:0 8px 30px rgba(255,26,26,.12);background:linear-gradient(180deg,#ff1a1a,#770000)}

    /* logo larger on desktop but we will increase mobile size below */
    #logo{position:fixed;top:6vh;left:50%;transform:translateX(-50%);z-index:var(--z-logo);pointer-events:auto}
    #logo img{max-width:28vw;height:auto;max-height:84px;filter:drop-shadow(0 6px 18px rgba(0,0,0,.8))}

    /* SMOKE VIDEO */
    #smoke-wrap{position:fixed;inset:0;pointer-events:none;z-index:var(--z-smoke);overflow:hidden}
    #smokeVideo,#smokeVideo2{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.55;filter:contrast(1.05) saturate(.95)}
    #smokeVideo2{opacity:.28;mix-blend-mode:screen;transform:scale(1.04) translateY(-2%)}

    /* COLOR / RED FLASH */
    #colorOverlay{position:fixed;inset:0;background:var(--red);mix-blend-mode:color;opacity:0;transition:opacity var(--text-dur)ms ease-in-out;z-index:var(--z-color);pointer-events:none}
    #redOverlay{position:fixed;inset:0;background:var(--red);mix-blend-mode:screen;opacity:0;z-index:var(--z-vfx);pointer-events:none;animation-fill-mode:both}
    @keyframes redFlash{0%{opacity:0}10%{opacity:.42}30%{opacity:0}100%{opacity:0}}

    /* FLICKER */
    .vfx{position:fixed;inset:0;pointer-events:none;z-index:var(--z-vfx)}
    .flicker{position:absolute;inset:0;mix-blend-mode:screen;opacity:0;background:
      radial-gradient(ellipse at 20% 20%,rgba(255,255,255,.06),transparent 10%),
      radial-gradient(ellipse at 80% 80%,rgba(255,255,255,.04),transparent 12%);transition:opacity .08s}

    /* HEADLINE */
    #headline{position:fixed;top:42vh;left:50%;transform:translateX(-50%);text-align:center;z-index:var(--z-head);pointer-events:none;width:98%}
    #headlineText{font-size:clamp(48px,14vw,136px);line-height:.9;letter-spacing:.12em;opacity:0;position:relative;display:inline-block;padding:6px 12px}
    @keyframes headlineImpact{0%{opacity:0;transform:scale(.78)}60%{opacity:1;transform:scale(1.06)}100%{transform:scale(1)}}
    .impact{animation:headlineImpact var(--text-dur)ms cubic-bezier(.2,.9,.2,1) both}
    @keyframes textFade{0%,10%{opacity:0}20%,80%{opacity:1}100%{opacity:0}}
    .fadeText{animation:textFade var(--text-dur)ms both}
    .glitch,.glitch::before,.glitch::after{animation:glitch .6s steps(2) both}
    @keyframes glitch{0%,100%{clip:rect(0,9999px,0,0)}20%{clip:rect(20px,9999px,40px,0)}40%{clip:rect(50px,9999px,70px,0)}60%{clip:rect(10px,9999px,30px,0)}80%{clip:rect(60px,9999px,80px,0)}}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;inset:0;opacity:.6}
    .glitch::before{color:#ff4b4b;left:2px}
    .glitch::after{color:#7fb7ff;left:-2px}

    /* BLOOD CIRCLE */
    #bloodCircle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);opacity:0;width:clamp(200px,40vw,420px);pointer-events:none;z-index:var(--z-blood)}
    @keyframes circleAnim{0%,20%{opacity:0}25%,75%{opacity:.6}100%{opacity:0}}
    @keyframes bloodPulse{0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.08)}}
    .pulseOnce{animation:circleAnim var(--circle-dur)ms both}
    .pulseLoop{animation:bloodPulse 1.2s ease-in-out infinite}

    /* POP when red smoke comes: add a short pop + glow */
    .vfx-active .anarchyBtn img{transform:scale(1.08);transition:transform .12s,filter .12s}
    .vfx-active .anarchyBtn img{filter:drop-shadow(0 6px 18px rgba(255,26,26,.35))}
    .vfx-active .cta a{transform:scale(1.06);box-shadow:0 18px 40px rgba(255,26,26,.18);transition:transform .12s,box-shadow .12s}

    /* reduce the pop after a short period for naturalness */
    .vfx-active-short .anarchyBtn img{transform:scale(1.12)}
    .vfx-active-short .cta a{transform:scale(1.12);box-shadow:0 22px 56px rgba(255,26,26,.22)}

    /* responsive adjustments and larger mobile logo */
    @media (max-width:900px){
      #logo img{max-width:38vw;max-height:72px}
      .anarchyMenu{right:10px;top:86px}
    }
    @media (max-width:600px){
      #headline{top:36vh}
      #headlineText{font-size:clamp(34px,10vw,72px)}
      #bloodCircle{width:60vw}
      .cta a{font-size:16px;padding:10px 16px}
      /* make logo noticeably larger on mobile */
      #logo img{max-width:62vw;max-height:110px}
      .anarchyBtn{width:56px;height:56px}
    }

    /* prefers-reduced-motion fallback (no aggressive transforms) */
    @media (prefers-reduced-motion: reduce){
      .impact,.pulseLoop,.pulseOnce,.glitch{animation:none!important}
      .vfx-active .anarchyBtn img,.vfx-active .cta a{transform:none;box-shadow:none;filter:none}
    }
  </style>
</head>
<body>
  <!-- MENU -->
  <button id="anarchyBtn" class="anarchyBtn" aria-controls="anarchyMenu" aria-expanded="false" title="Menu">
    <img src="anarchy.png" alt="Toggle menu" />
  </button>
  <nav id="anarchyMenu" class="anarchyMenu" role="menu" aria-hidden="true">
    <a href="rules.html">Rules</a>
    <a href="support.html">Support</a>
    <a href="donate.html">Donate</a>
    <a href="killfeed.html">Kill Feed</a>
    <a href="leaderboard.html">Leaderboard</a>
  </nav>

  <!-- CTA & logo -->
  <div class="cta" role="navigation" aria-label="Primary actions">
    <a href="steam://connect/YOURSERVERIP" aria-label="Join the server">JOIN SERVER</a>
    <a href="https://discord.gg/YOURDISCORD" target="_blank" rel="noopener" aria-label="Join Discord">JOIN COMMUNITY</a>
  </div>
  <div id="logo" aria-hidden="true"><img src="Aggro-logo.PNG" alt="Aggro Logo" /></div>

  <!-- smoke layers -->
  <div id="smoke-wrap" aria-hidden="true">
    <video id="smokeVideo" muted autoplay loop playsinline preload="auto">
      <source src="Smoke.mp4" type="video/mp4" />
    </video>
    <video id="smokeVideo2" muted autoplay loop playsinline preload="auto">
      <source src="Smoke2.mp4" type="video/mp4" />
    </video>
  </div>

  <!-- overlays -->
  <div id="colorOverlay" aria-hidden="true"></div>
  <div id="redOverlay" aria-hidden="true"></div>
  <div class="vfx" aria-hidden="true"><div id="vfxFlicker" class="flicker"></div></div>

  <!-- headline & blood -->
  <div id="headline" aria-hidden="false">
    <div id="headlineText" class="fadeText impact" data-text="JOIN THE FIGHT">JOIN THE FIGHT</div>
    <img id="bloodCircle" class="pulseOnce" src="blood1.png" alt="" />
  </div>

  <script>
    (function(){
      const S = getComputedStyle(document.documentElement);
      const cycle = Number(S.getPropertyValue('--cycle')) || 4000;
      const txtDur = Number(S.getPropertyValue('--text-dur')) || 3000;
      const flash = Number(S.getPropertyValue('--flash-dur')) || 600;
      const circleDur = Number(S.getPropertyValue('--circle-dur')) || 3000;
      const circleDelay = Number(S.getPropertyValue('--circle-delay')) || 0;

      const colorOvl = document.getElementById('colorOverlay');
      const redOvl = document.getElementById('redOverlay');
      const textEl = document.getElementById('headlineText');
      const circle = document.getElementById('bloodCircle');
      const flicker = document.getElementById('vfxFlicker');
      const root = document.documentElement;
      let running = false;

      function restartAnimation(el, name, dur, delay = 0){
        el.style.animation = 'none';
        void el.offsetWidth;
        el.style.animation = `${name} ${dur}ms ${delay}ms both`;
      }

      function run(){
        if(running) return;
        running = true;

        // color tint
        colorOvl.style.opacity = '1';
        setTimeout(()=> colorOvl.style.opacity = '0', Math.max(200, txtDur - 150));

        // red flash animation
        restartAnimation(redOvl,'redFlash',flash);

        // add vfx-active class to make menu + cta pop during flash
        root.classList.add('vfx-active');
        // short stronger pop class for first 180ms then relax to regular vfx-active
        root.classList.add('vfx-active-short');
        setTimeout(()=> root.classList.remove('vfx-active-short'), 180);

        // remove vfx-active after a slightly longer window so the glow feels synced with flash
        setTimeout(()=> root.classList.remove('vfx-active'), flash + 120);

        // headline: re-trigger impact + fade
        restartAnimation(textEl,'headlineImpact',Math.max(700, txtDur));
        restartAnimation(textEl,'textFade',txtDur);
        textEl.classList.remove('glitch');
        setTimeout(()=> textEl.classList.add('glitch'),200);

        // blood: pulse animation and quick emphasis pulse
        restartAnimation(circle,'circleAnim',circleDur,circleDelay);
        circle.classList.remove('pulseLoop');
        setTimeout(()=> circle.classList.add('pulseLoop'), 240);

        // flicker visual
        flicker.style.opacity = '1';
        setTimeout(()=> flicker.style.opacity = '0', flash + 60);

        setTimeout(()=> running = false, cycle);
      }

      // menu toggle (simple)
      const btn = document.getElementById('anarchyBtn');
      const menu = document.getElementById('anarchyMenu');
      btn.addEventListener('click', function(e){
        e.stopPropagation();
        const open = menu.classList.toggle('open');
        menu.setAttribute('aria-hidden', String(!open));
        btn.setAttribute('aria-expanded', String(open));
      });
      document.addEventListener('click', function(e){
        if(!e.target.closest('.anarchyBtn') && !e.target.closest('.anarchyMenu')){
          menu.classList.remove('open');
          menu.setAttribute('aria-hidden', 'true');
          btn.setAttribute('aria-expanded', 'false');
        }
      });

      // keyboard accessible toggle
      btn.addEventListener('keydown', function(e){
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); btn.click(); }
      });

      // start
      window.addEventListener('DOMContentLoaded', function(){
        run();
        setInterval(run, cycle);
      });

      // prefers-reduced-motion handling
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)');
      if(prefersReduced.matches){
        document.documentElement.style.setProperty('--text-dur','800');
        document.documentElement.style.setProperty('--cycle','3000');
        textEl.classList.remove('impact','glitch');
        circle.classList.remove('pulseLoop');
        colorOvl.style.transition = 'none';
      }
    })();
  </script>
</body>
</html>
