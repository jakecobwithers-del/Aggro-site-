<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aggro PvP — JOIN THE FIGHT (Readable, Tuned Splatter)</title>
<style>
  :root{
    --smoke-opacity:0.56;
    --surge-ms:2200;
    --glitch-ms:420;
    --splat-opacity:0.72;   /* semi-transparent so text remains visible */
    --splat-scale:1.04;     /* subtle size increase on land */
    --splat-stagger:120;    /* base stagger step */
  }

  /* local TTF: keep "28 Days Later.ttf" in repo root */
  @font-face{
    font-family: "28Days";
    src: url("28%20Days%20Later.ttf?v=1") format("truetype"),
         url("28 Days Later.ttf?v=1") format("truetype");
    font-weight: 400 900;
    font-style: normal;
    font-display: swap;
  }

  html,body{height:100%;margin:0;background:#050505;color:#fff;font-family:"28Days",Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;overflow:hidden;-webkit-font-smoothing:antialiased}
  img{display:block;max-width:100%;height:auto}
  button{background:transparent;border:0;cursor:pointer;color:inherit;font:inherit}

  /* Smoke background */
  #smoke-wrap{position:fixed;inset:0;z-index:2000;pointer-events:none}
  #smokeVideo{width:100%;height:100%;object-fit:cover;opacity:var(--smoke-opacity);filter:blur(1.6px) saturate(1) contrast(1);will-change:transform,filter,opacity}
  #smokeVideo.glitch{transform:translateY(-6px) scale(1.02);filter:blur(3px) contrast(1.06) saturate(1.12);opacity:0.98;transition:all var(--glitch-ms) cubic-bezier(.22,.9,.3,1)}

  /* Center stage: join text on top of smoke */
  .centerStage{position:fixed;inset:0;z-index:4200;pointer-events:none;display:flex;align-items:center;justify-content:center;padding:5vh 6vw}

  /* Clean white text with letter spacing; no heavy stroke (keeps crisp on phone) */
  #joinText{
    display:inline-block;
    font-family:"28Days",Inter,system-ui,Helvetica,Arial,sans-serif;
    font-weight:900;
    color:#fff;
    font-size:clamp(30px,10.5vw,88px);
    letter-spacing:0.34em;
    line-height:0.9;
    text-align:center;
    background:transparent;
    padding:0.22em 0.6em;
    opacity:0;
    transform:translateY(16px) scale(.995);
    transition:opacity 200ms ease, transform 260ms cubic-bezier(.2,.9,.3,1);
    pointer-events:none;
    z-index:4210; /* above smoke */
    white-space:nowrap;
  }
  #joinText.visible{opacity:1;transform:translateY(0) scale(1)}

  /* Splatter layer sits above the text, but pieces are smaller and placed to avoid covering letter centers */
  .splatLayer{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(86vw,860px);height:auto;z-index:4230;pointer-events:none;overflow:visible}

  .splat-piece{position:absolute;opacity:0;transform-origin:center center;will-change:transform,opacity,filter;mix-blend-mode:multiply;filter:brightness(.95) contrast(1.05) saturate(1.05);transition:opacity 140ms linear, transform 300ms cubic-bezier(.2,.9,.28,1), filter 200ms}

  /* Improved placements that avoid letter centers — tuned for common screen widths:
     - pieces lean toward edges and upper areas so letters remain readable.
     - sizes reduced compared to previous drafts.
  */
  .sp1{ left:28%; top:14%; width:120px; transform:translate(-50%,-50%) scale(.6) rotate(-12deg) } /* top-left scatter */
  .sp2{ left:72%; top:12%; width:140px; transform:translate(-50%,-50%) scale(.64) rotate(10deg) } /* top-right spray */
  .sp3{ left:36%; top:36%; width:160px; transform:translate(-50%,-50%) scale(.66) rotate(-8deg) } /* left edge */
  .sp4{ left:64%; top:36%; width:160px; transform:translate(-50%,-50%) scale(.66) rotate(8deg) }  /* right edge */
  .sp5{ left:50%; top:52%; width:200px; transform:translate(-50%,-50%) scale(.6) rotate(0deg) }   /* lower center (thin) */

  /* show state: subtle scale and opacity so text reads through */
  .splat-piece.show{
    opacity:var(--splat-opacity);
    transform:translate(-50%,-50%) scale(var(--splat-scale)) rotate(0deg);
    filter:brightness(1.02) contrast(1.08) saturate(1.06);
  }

  /* Very subtle final stain that darkens but stays translucent */
  .final-stain{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(86vw,860px);z-index:4240;mix-blend-mode:multiply;opacity:0;filter:brightness(.92) contrast(1.05) saturate(1.05);transition:opacity 200ms linear}
  .final-stain.show{opacity:0.58} /* keep low so text shows through */

  /* soft red tint underneath visuals (kept low so white text is unaffected) */
  .glitch-paint{position:fixed;inset:0;z-index:4100;pointer-events:none;opacity:0;transition:opacity 120ms linear}
  .glitch-paint.show{opacity:1}
  .red-wash{position:absolute;inset:0;background:linear-gradient(180deg, rgba(255,18,18,0.06), rgba(255,18,18,0.02));mix-blend-mode:overlay;filter:blur(6px) saturate(1.02);pointer-events:none}

  /* UI on top */
  #logo{position:fixed;top:6vh;left:50%;transform:translateX(-50%);z-index:5000}
  .widget-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:34px;z-index:5000;display:flex;flex-direction:column;gap:12px;align-items:center}
  .cta{padding:10px 18px;border-radius:10px;color:#fff;text-decoration:none;font-weight:800;background:rgba(0,0,0,0.5)}
  .primary{background:linear-gradient(90deg,#ff4040,#ff1a1a)}.secondary{background:#5865F2}

  /* responsive tuning: shrink splats more on narrow displays and increase text clarity */
  @media (max-width:720px){
    #joinText{font-size:clamp(20px,12.6vw,56px);letter-spacing:0.28em}
    .sp1{width:92px;left:24%;top:12%}
    .sp2{width:100px;left:76%;top:10%}
    .sp3{width:120px;left:30%;top:34%}
    .sp4{width:120px;left:70%;top:34%}
    .sp5{width:140px;top:56%}
    .final-stain.show{opacity:0.5}
  }
  @media (max-width:420px){
    #joinText{font-size:clamp(18px,14vw,44px);letter-spacing:0.22em;padding:0.18em 0.4em}
    .sp1{width:72px;left:22%;top:12%}
    .sp2{width:76px;left:78%;top:10%}
    .sp3{width:92px;left:30%;top:36%}
    .sp4{width:92px;left:70%;top:36%}
    .sp5{width:120px;top:58%}
    .final-stain.show{opacity:0.46}
  }
</style>
</head>
<body>

  <!-- Smoke background -->
  <div id="smoke-wrap" aria-hidden="true">
    <video id="smokeVideo" muted playsinline preload="auto" crossorigin="anonymous">
      <source src="Smoke.mp4" type="video/mp4">
    </video>
  </div>

  <!-- Center stage: white JOIN text on top of smoke -->
  <div class="centerStage" aria-hidden="true">
    <div id="joinText" aria-live="polite" role="status">J O I N&nbsp;&nbsp;T H E&nbsp;&nbsp;F I G H T</div>

    <!-- splatter stage: pieces placed around text (smaller, semi-transparent) -->
    <div class="splatLayer" id="splatLayer" aria-hidden="true">
      <img class="splat-piece sp1" id="sp1" src="blood.png" alt="">
      <img class="splat-piece sp2" id="sp2" src="blood1.png" alt="">
      <img class="splat-piece sp3" id="sp3" src="blood.png" alt="">
      <img class="splat-piece sp4" id="sp4" src="blood1.png" alt="">
      <img class="splat-piece sp5" id="sp5" src="blood.png" alt="">
      <img class="final-stain" id="finalStain" src="blood1.png" alt="">
    </div>
  </div>

  <!-- subtle red tint (low impact) -->
  <div id="glitchPaint" class="glitch-paint" aria-hidden="true"><div class="red-wash"></div></div>

  <!-- Logo and CTAs -->
  <div id="logo"><img src="Aggro-logo.PNG" alt="Aggro PvP Logo"></div>
  <div class="widget-bar" role="navigation" aria-label="Quick actions">
    <a class="cta primary" href="steam://connect/103.193.80.64:3436">Connect to Server</a>
    <a class="cta secondary" href="https://discord.gg/gSwkVzJyMT" target="_blank" rel="noopener">Join Community</a>
  </div>

<script>
(function(){
  const smoke = document.getElementById('smokeVideo');
  const joinText = document.getElementById('joinText');
  const pieces = [
    document.getElementById('sp1'),
    document.getElementById('sp2'),
    document.getElementById('sp3'),
    document.getElementById('sp4'),
    document.getElementById('sp5')
  ];
  const finalStain = document.getElementById('finalStain');
  const glitchPaint = document.getElementById('glitchPaint');

  // try autoplay and loop
  smoke.loop = true;
  smoke.play().catch(()=>{});

  // simple staged spray: show text, then smaller splats around it, keep text readable
  function sprayOnText(){
    // show text immediately
    joinText.classList.add('visible');

    // reset pieces
    [...pieces, finalStain].forEach(el => { el.classList.remove('show'); el.style.transform = ''; });

    // staggered timings tuned for subtlety
    const base = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--splat-stagger')) || 120;
    const seq = [
      { el: pieces[2], delay: base * 1 }, // left
      { el: pieces[0], delay: base * 2 }, // top-left
      { el: pieces[1], delay: base * 3 }, // top-right
      { el: pieces[3], delay: base * 4 }, // right
      { el: pieces[4], delay: base * 5 }, // lower center
      { el: finalStain,   delay: base * 8 } // unify
    ];

    seq.forEach(item => {
      setTimeout(()=>{
        // gentle randomness for natural spray
        const r = (Math.random()*6) - 3;
        const s = (0.96 + Math.random()*0.12) * (item.el === finalStain ? 1 : parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--splat-scale') || 1.04));
        item.el.style.transform = `translate(-50%,-50%) scale(${s}) rotate(${r}deg)`;
        item.el.classList.add('show');
      }, item.delay);
    });

    // keep visible for SURGE_MS then clear gracefully
    const SURGE_MS = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--surge-ms')) || 2200;
    setTimeout(()=>{
      // clear pieces in quick succession to avoid blocking text readability
      [...pieces, finalStain].forEach((el,i)=> setTimeout(()=> el.classList.remove('show'), i * 50));
      joinText.classList.remove('visible');
    }, SURGE_MS + 420);
  }

  // loop detection on smoke currentTime wrap (if smoke is a tight loop)
  let prevTime = 0;
  smoke.addEventListener('timeupdate', ()=>{
    const t = smoke.currentTime || 0;
    if (prevTime - t > 0.28){
      // run once per loop by default
      sprayOnText();
    }
    prevTime = t;
  });

  // fallback if metadata missing: run every 5s
  smoke.addEventListener('loadedmetadata', ()=>{
    const dur = smoke.duration || 0;
    if (!isFinite(dur) || dur <= 0 || dur < 0.5){
      setInterval(()=> sprayOnText(), 5000);
    }
  });

  // expose manual trigger while testing
  window.sprayOnText = sprayOnText;

  // initial quick test after load so you can preview on push (comment this out once happy)
  setTimeout(()=> sprayOnText(), 700);

  // resume playback on any tap/click
  document.addEventListener('click', ()=>{ if (smoke.paused) smoke.play().catch(()=>{}); });

})();
</script>
</body>
</html>