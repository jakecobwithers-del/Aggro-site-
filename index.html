<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP — Server Rules</title>

  <style>
    /* Font (encode spaces in filename) */
    @font-face{
      font-family:'DayZFont';
      src: url('28%20Days%20Later.ttf') format('truetype');
      font-display: swap;
    }

    :root{
      --bg:#000;
      --accent:#ff3b3b;
      --muted:rgba(255,255,255,0.88);
      --button-bg: rgba(255,255,255,0.03);
      --button-hover: rgba(255,255,255,0.04);
      --glass: rgba(255,255,255,0.02);
      --max-width:980px;
      --radius:12px;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:#fff;
      font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      -webkit-text-size-adjust:100%;
      overflow-y:auto;
    }

    /* Full smoke background */
    #smoke-bg{
      position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;
    }
    #smoke-bg video{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:160vw; height:160vh; object-fit:cover; opacity:0.6;
      filter: blur(6px) saturate(1.05) contrast(1.02); mix-blend-mode:screen;
    }

    .site{ position:relative; z-index:2; min-height:100vh; display:flex; align-items:flex-start; justify-content:center; padding:40px 20px; box-sizing:border-box; }

    .content{
      width:100%; max-width:var(--max-width);
      display:flex; flex-direction:column; gap:18px;
      align-items:center;
      box-sizing:border-box;
    }

    .heading{
      text-align:center;
      pointer-events:none;
      margin-bottom:6px;
    }

    h1{
      margin:0;
      font-family:'DayZFont', "Segoe UI", sans-serif;
      font-size: clamp(28px, 6.5vw, 56px);
      color:#fff;
      -webkit-text-stroke: 1.2px rgba(0,0,0,0.7);
      letter-spacing:1.6px;
      text-transform:uppercase;
    }

    .lead{ margin-top:8px; color:var(--muted); font-size:14px; pointer-events:auto; text-align:center; }

    /* Button grid */
    .btn-grid{
      width:100%;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
      margin-top:8px;
    }

    /* Section button style */
    .rule-btn{
      -webkit-appearance:none; appearance:none;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      background:var(--button-bg);
      border:1px solid rgba(255,59,59,0.06);
      padding:14px 16px;
      border-radius:12px;
      cursor:pointer;
      color:var(--muted);
      transition:transform .12s ease, background .12s ease, box-shadow .12s ease;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
      font-weight:700;
      font-family:'DayZFont', "Segoe UI", sans-serif;
      text-align:left;
    }

    .rule-btn:hover{ background:var(--button-hover); transform:translateY(-3px); }
    .rule-btn:active{ transform:translateY(-1px); }
    .rule-btn .title{ font-size:16px; color:var(--accent); }
    .rule-btn .hint{ font-size:13px; color:rgba(255,255,255,0.75); font-weight:600; }

    /* Modal (panel) */
    .modal-wrap{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
      padding:24px;
      box-sizing:border-box;
      background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.75));
    }

    .modal{
      width:100%;
      max-width:820px;
      background: linear-gradient(180deg,#050505,#0b0b0b);
      border-radius:12px;
      padding:22px;
      box-sizing:border-box;
      box-shadow:0 30px 80px rgba(0,0,0,0.8);
      border:1px solid rgba(255,59,59,0.06);
      transform:translateY(12px);
      opacity:0;
      transition: transform .22s ease, opacity .22s ease;
    }

    .modal.open{ transform:translateY(0); opacity:1; }
    .modal h3{ margin:0 0 6px; font-family:'DayZFont', "Segoe UI", sans-serif; color:var(--accent); font-size:20px; }
    .modal p{ margin:0 0 12px; color:var(--muted); line-height:1.5; font-size:15px; }

    .rules-list{ display:flex; flex-direction:column; gap:10px; margin-top:6px; }
    .rules-list .item{
      background:rgba(255,255,255,0.02);
      padding:12px; border-radius:10px; border-left:4px solid rgba(255,59,59,0.14);
      font-size:15px; color:rgba(255,255,255,0.95);
    }

    .modal-footer{ display:flex; justify-content:space-between; gap:12px; margin-top:16px; align-items:center; flex-wrap:wrap; }
    .close-btn{
      background:#000; border:1px solid rgba(255,59,59,0.06); color:var(--accent);
      padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700;
    }

    .back-link{ color:var(--muted); text-decoration:none; font-weight:700; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); background:var(--glass); }

    /* show modal */
    .modal-wrap.show{ display:flex; }

    /* Accessible focus */
    .rule-btn:focus, .close-btn:focus, .back-link:focus{ outline:3px solid rgba(255,59,59,0.12); outline-offset:4px; }

    @media (max-width:520px){
      .modal{ padding:16px; border-radius:10px; }
      .rule-btn{ padding:12px; border-radius:10px; }
    }
  </style>
</head>
<body>

  <!-- smoke background -->
  <div id="smoke-bg" aria-hidden="true">
    <video id="smokeVideo" autoplay loop muted playsinline preload="auto" poster="smoke-poster.jpg" aria-hidden="true">
      <source src="Smoke.webm" type="video/webm">
      <source src="Smoke.mp4?v=1" type="video/mp4">
    </video>
  </div>

  <main class="site" role="main">
    <div class="content" role="region" aria-label="Aggro PvP rules chooser">
      <div class="heading">
        <h1>Server Rules</h1>
        <div class="lead">Aggro PvP is not for the weak. Tap a section to view its rules.</div>
      </div>

      <div class="btn-grid" role="list">
        <button class="rule-btn" data-section="general" aria-controls="modal" aria-expanded="false" role="button">
          <span class="title">General</span>
          <span class="hint">View</span>
        </button>

        <button class="rule-btn" data-section="safezone" aria-controls="modal" aria-expanded="false" role="button">
          <span class="title">Safezone</span>
          <span class="hint">View</span>
        </button>

        <button class="rule-btn" data-section="base-building" aria-controls="modal" aria-expanded="false" role="button">
          <span class="title">Base Building</span>
          <span class="hint">View</span>
        </button>

        <button class="rule-btn" data-section="storage" aria-controls="modal" aria-expanded="false" role="button">
          <span class="title">Base Storage Limit</span>
          <span class="hint">View</span>
        </button>

        <button class="rule-btn" data-section="raiding" aria-controls="modal" aria-expanded="false" role="button">
          <span class="title">Raiding</span>
          <span class="hint">View</span>
        </button>
      </div>

      <div style="width:100%; display:flex; justify-content:center; margin-top:8px;">
        <a class="back-link" href="index.html">← Return to Main Page</a>
      </div>
    </div>
  </main>

  <!-- modal (single shared modal) -->
  <div id="modalWrap" class="modal-wrap" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal" class="modal" role="document" tabindex="-1" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Section</h3>
      <p id="modalDesc">Rules</p>

      <div class="rules-list" id="modalRules" role="list"></div>

      <div class="modal-footer">
        <div style="color:rgba(255,255,255,0.65);font-size:13px;">Last updated: v1</div>
        <button class="close-btn" id="modalClose">Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const sections = {
        general: {
          title: 'General',
          desc: 'Core server expectations.',
          rules: [
            'No external mods, hacks, duping, NVinspect, or glitch movement. Filters and external crosshairs are allowed.',
            'No alt accounts or stream sniping.',
            'No combat logging. Wait 10 minutes after PvP before logging or entering safezone unless the fight couldn’t realistically continue.',
            'If you log into someone else\\'s base or locked room unexpectedly, make a ticket and don’t touch anything—even if it’s your own base post-raid.',
            'Report bugs. Abusing glitches (including de-rendering bases) will be punished.'
          ]
        },
        safezone: {
          title: 'Safezone',
          desc: 'Safezone behaviour.',
          rules: [
            'Unattended dropped items are free game. Otherwise, don’t touch what’s not yours including vehicles.',
            'No safezone camping, blocking, following, or abusing protection. If you kill in self-defense entering/leaving, leave their loot.',
            'Unattended ungaraged vehicles may be deleted after 12 hours.'
          ]
        },
        'base-building': {
          title: 'Base Building',
          desc: 'Construction rules.',
          rules: [
            'One main base + one stash base/FOB per player.',
            'Max 25 code-locked doors/hatches/containers per base.',
            'All areas of your base must be accessible on foot—no loot rooms via windows only.',
            'Build realistically—no unsupported structures or more than two floor kits out from a structure.',
            'BBP kits must not overlap in ways that block access or raid tools.',
            'Mesh and fence kits must be fully constructed.',
            'On municipal buildings, silos, or radio towers, max two floor kits out—don’t block player structures.',
            'Secure your base. Don’t share codes with untrusted players—no compensation for your mistakes.',
            'Note: No base size limit, but don’t abuse it. Staff will notify you if it gets excessive.'
          ]
        },
        storage: {
          title: 'Base Storage Limit',
          desc: 'Inventory caps.',
          rules: ['You’re limited to 20 storage kits per base, plus 5 extra per team member.']
        },
        raiding: {
          title: 'Raiding',
          desc: 'Raid rules and etiquette.',
          rules: [
            'Alliances are allowed.',
            'No despawning, repairing, or modifying bases during active raids.',
            'Loot can only be dropped if taking the storage kit—don’t despawn unwanted loot.',
            'No combat logging during raids. If IRL forces you to log, say so—don’t log with combat tag.',
            'Don’t abuse hologram/kit placement to raid (one ladder on the floor is allowed).',
            'Glitch methods (fences, punching through windows, missing vehicles, floating entities) are not allowed.',
            'A raid is considered active for 15 minutes after the last use of explosives or raid tools.'
          ]
        }
      };

      const btns = document.querySelectorAll('.rule-btn');
      const modalWrap = document.getElementById('modalWrap');
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalDesc = document.getElementById('modalDesc');
      const modalRules = document.getElementById('modalRules');
      const modalClose = document.getElementById('modalClose');
      let lastFocused = null;

      function openModal(key){
        const s = sections[key];
        if (!s) return;
        modalTitle.textContent = s.title;
        modalDesc.textContent = s.desc;
        modalRules.innerHTML = '';
        s.rules.forEach((r, i) => {
          const div = document.createElement('div');
          div.className = 'item';
          div.setAttribute('role','listitem');
          div.innerHTML = `<strong style="color:${getComputedStyle(document.documentElement).getPropertyValue('--accent')};margin-right:8px;">${i+1}.</strong> ${r}`;
          modalRules.appendChild(div);
        });

        modalWrap.classList.add('show');
        modal.classList.add('open');
        modalWrap.setAttribute('aria-hidden','false');
        lastFocused = document.activeElement;
        modal.setAttribute('tabindex','-1');
        modal.focus();
      }

      function closeModal(){
        modalWrap.classList.remove('show');
        modal.classList.remove('open');
        modalWrap.setAttribute('aria-hidden','true');
        if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
      }

      btns.forEach(b=>{
        b.addEventListener('click', e=>{
          const key = b.getAttribute('data-section');
          openModal(key);
        });
        b.addEventListener('keydown', e=>{
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); b.click(); }
        });
      });

      modalClose.addEventListener('click', closeModal);
      modalWrap.addEventListener('click', e=>{
        if (e.target === modalWrap) closeModal();
      });
      document.addEventListener('keydown', e=>{
        if (e.key === 'Escape') closeModal();
      });

      // video fallback: hide video element if fails
      const vid = document.getElementById('smokeVideo');
      if (vid){
        vid.addEventListener('error', ()=>{ document.getElementById('smoke-bg').style.display='none'; }, {passive:true});
        setTimeout(()=> { if (vid.readyState === 0) document.getElementById('smoke-bg').style.display='none'; }, 2500);
      }
    })();
  </script>
</body>
</html>