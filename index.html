<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP â€” JOIN THE FIGHT</title>

  <link rel="preload" href="28%20Days%20Later.ttf" as="font" type="font/ttf" crossorigin>

  <style>
    :root{
      --bg:#050505;
      --red:#ff1a1a;
      --phase:3000;
      --text-dur:3000;
      --flash-dur:600;
      --z-smoke:2000;
      --z-overlay:3000;
      --z-ui:6000;
      --z-head:6500;
      --z-blood:7000; /* blood above headline */
    }

    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;width:100%;margin:0;padding:0;background:var(--bg);overflow:hidden;color:#fff;font-family:"28Days",Impact,sans-serif}
    @font-face{font-family:"28Days";src:url("28%20Days%20Later.ttf") format("truetype");font-display:swap}
    button,a{background:none;border:0;cursor:pointer;color:inherit;text-decoration:none}

    /* Smoke */
    #smoke-wrap{position:fixed;inset:0;pointer-events:none;z-index:var(--z-smoke);overflow:hidden}
    #smokeVideo{width:100%;height:100%;object-fit:cover;opacity:.6;mix-blend-mode:screen;transition:opacity .4s linear}

    /* overlays */
    #colorOverlay{position:fixed;inset:0;pointer-events:none;background:var(--red);mix-blend-mode:color;opacity:0;transition:opacity .25s linear;z-index:var(--z-overlay)}
    #redFlash{position:fixed;inset:0;pointer-events:none;background:var(--red);mix-blend-mode:screen;opacity:0;transition:opacity .06s linear;z-index:calc(var(--z-overlay)+1)}

    /* UI always visible */
    #logo{position:fixed;top:6vh;left:50%;transform:translateX(-50%);z-index:var(--z-ui);pointer-events:auto}
    #logo img{max-width:30vw;height:auto;max-height:84px;filter:drop-shadow(0 8px 28px rgba(0,0,0,.85))}
    .anarchyBtn{position:fixed;top:14px;right:14px;z-index:var(--z-ui);pointer-events:auto;background:transparent;width:64px;height:64px}
    .anarchyBtn img{width:64px;height:64px;display:block}
    .anarchyMenu{position:fixed;top:90px;right:14px;display:none;flex-direction:column;padding:12px;background:rgba(10,10,10,0.95);border-radius:12px;z-index:var(--z-ui);pointer-events:auto}
    .anarchyMenu.open{display:flex}
    .anarchyMenu a{color:#ffdede;font-size:16px;font-weight:800;padding:10px 14px;border-radius:8px;margin:6px 0}
    .cta{position:fixed;bottom:6vh;left:50%;transform:translateX(-50%);display:flex;gap:16px;z-index:var(--z-ui);pointer-events:auto;align-items:center}
    .cta a{position:relative;display:inline-block;font-size:18px;padding:12px 22px;border-radius:12px;background:linear-gradient(180deg,#151515,#070707);color:#fff;font-weight:800;transition:transform .12s,box-shadow .12s;will-change:transform,box-shadow}
    .cta a.steam{--ar:255;--ag:26;--ab:26}
    .cta a.discord{--ar:114;--ag:137;--ab:218}
    .cta a:hover{transform:translateY(-4px);box-shadow:0 12px 36px rgba(0,0,0,.5)}

    /* Headline container: relative so absolute blood can overlap */
    #headline{position:fixed;top:42vh;left:50%;transform:translateX(-50%);text-align:center;z-index:var(--z-head);pointer-events:none;width:96%;height:auto;display:flex;align-items:center;justify-content:center}
    /* headline text sits below blood visually (lower z-index) */
    #headlineText{
      font-size:clamp(48px,14vw,136px);line-height:.9;letter-spacing:.12em;color:#fff;
      opacity:0; transform:scale(.96); transition:opacity .18s, transform .18s; will-change:opacity,transform;
      position:relative; z-index:calc(var(--z-blood) - 1);
      padding:6px 12px;
    }

    /* blood positioned absolutely on top of headline text */
    #bloodCircle{
      position:absolute; left:50%; top:50%; transform:translate(-50%, -62%); /* slight vertical offset so blood sits visually over text */
      width:clamp(220px,48vw,520px); opacity:0; transition:opacity .18s, transform .18s; pointer-events:none;
      z-index:var(--z-blood);
      mix-blend-mode:normal;
    }

    /* visible states applied by JS */
    .red-phase #colorOverlay{opacity:.28}
    .red-flash-on #redFlash{opacity:.42}
    .pop-visible #headlineText{opacity:1;transform:scale(1)}
    .pop-visible #bloodCircle{opacity:.9;transform:translate(-50%,-50%) scale(1)}
    .pop-ui .cta a{transform:scale(1.12);box-shadow:0 28px 60px rgba(255,26,26,.22)}
    .pop-ui .anarchyBtn img{transform:scale(1.12);filter:drop-shadow(0 10px 30px rgba(255,26,26,.35))}

    /* responsive adjustments */
    @media (max-width:900px){#logo img{max-width:38vw;max-height:72px} .anarchyMenu{right:10px;top:86px}}
    @media (max-width:600px){
      #headline{top:36vh}
      #headlineText{font-size:clamp(34px,10vw,72px)}
      #bloodCircle{width:60vw}
      .cta a{font-size:16px;padding:10px 16px}
      #logo img{max-width:62vw;max-height:110px}
      .anarchyBtn{width:56px;height:56px}
    }

    @media (prefers-reduced-motion: reduce){
      #smokeVideo{transition:none}
      #headlineText,#bloodCircle{transition:none}
      .pop-ui .anarchyBtn img,.pop-ui .cta a{transform:none;box-shadow:none;filter:none}
    }
  </style>
</head>
<body>
  <!-- menu -->
  <button id="anarchyBtn" class="anarchyBtn" aria-controls="anarchyMenu" aria-expanded="false" title="Menu">
    <img src="anarchy.png" alt="Toggle menu" />
  </button>
  <nav id="anarchyMenu" class="anarchyMenu" role="menu" aria-hidden="true">
    <a href="rules.html">Rules</a>
    <a href="support.html">Support</a>
    <a href="donate.html">Donate</a>
    <a href="killfeed.html">Kill Feed</a>
    <a href="leaderboard.html">Leaderboard</a>
  </nav>

  <!-- logo & CTAs -->
  <div id="logo"><img src="Aggro-logo.PNG" alt="Aggro Logo" /></div>
  <div class="cta" role="navigation" aria-label="Primary actions">
    <a class="steam" href="steam://connect/YOURSERVERIP" aria-label="Join the server">JOIN SERVER</a>
    <a class="discord" href="https://discord.gg/YOURDISCORD" target="_blank" rel="noopener" aria-label="Join Discord">JOIN COMMUNITY</a>
  </div>

  <!-- smoke -->
  <div id="smoke-wrap">
    <video id="smokeVideo" muted autoplay loop playsinline preload="auto" crossorigin="anonymous">
      <source src="Smoke.mp4" type="video/mp4" />
    </video>
  </div>

  <!-- overlays -->
  <div id="colorOverlay" aria-hidden="true"></div>
  <div id="redFlash" aria-hidden="true"></div>

  <!-- headline + blood (blood absolute and above text) -->
  <div id="headline" aria-hidden="true">
    <div id="headlineText" data-text="JOIN THE FIGHT">JOIN THE FIGHT</div>
    <img id="bloodCircle" src="blood1.png" alt="blood splat" />
  </div>

  <script>
    (function(){
      const PHASE = Number(getComputedStyle(document.documentElement).getPropertyValue('--phase')) || 3000;
      const root = document.documentElement;
      const smoke = document.getElementById('smokeVideo');
      const colorOverlay = document.getElementById('colorOverlay');
      const redFlash = document.getElementById('redFlash');
      const headline = document.getElementById('headlineText');
      const blood = document.getElementById('bloodCircle');
      const steamBtn = document.querySelector('.cta a.steam');
      const discBtn = document.querySelector('.cta a.discord');

      let isRed = false;
      let intervalId = null;
      let popTimer = null;
      let flashTimer = null;

      function startSmoke(){
        if(!smoke) return;
        smoke.style.opacity = '.6';
        smoke.play().catch(()=>{});
      }

      function hidePopElements(){
        root.classList.remove('pop-visible');
        if(headline){ headline.style.opacity = 0; headline.style.transform = 'scale(.96)'; }
        if(blood){ blood.style.opacity = 0; blood.style.transform = 'translate(-50%,-62%) scale(.96)'; }
      }

      function showPopElements(){
        root.classList.add('pop-visible');
        if(headline){ headline.style.opacity = 1; headline.style.transform = 'scale(1)'; }
        if(blood){ blood.style.opacity = 0.9; blood.style.transform = 'translate(-50%,-50%) scale(1)'; }
      }

      function triggerCtaPulse(el){
        if(!el) return;
        el.classList.remove('pulse-once');
        void el.offsetWidth;
        el.classList.add('pulse-once');
      }

      function enterNormal(){
        isRed = false;
        root.classList.remove('red-phase');
        colorOverlay.style.opacity = '0';
        redFlash.style.opacity = '0';
        root.classList.remove('pop-ui');
        hidePopElements();
      }

      function enterRed(){
        isRed = true;
        root.classList.add('red-phase');
        colorOverlay.style.opacity = '.28';

        redFlash.style.opacity = '.42';
        clearTimeout(flashTimer);
        flashTimer = setTimeout(()=> { redFlash.style.opacity = '0'; }, 120);

        clearTimeout(popTimer);
        popTimer = setTimeout(()=> {
          showPopElements();
          root.classList.add('pop-ui');
          triggerCtaPulse(steamBtn);
          setTimeout(()=> triggerCtaPulse(discBtn), 90);
          setTimeout(()=> { root.classList.remove('pop-ui'); }, PHASE - 300);
        }, 80);

        setTimeout(()=> {
          hidePopElements();
          colorOverlay.style.opacity = '0';
        }, PHASE - 220);
      }

      function togglePhase(){
        if(isRed) enterNormal();
        else enterRed();
      }

      // menu toggle
      const btn = document.getElementById('anarchyBtn');
      const menu = document.getElementById('anarchyMenu');
      if(btn && menu){
        btn.addEventListener('click', e=>{
          e.stopPropagation();
          const open = menu.classList.toggle('open');
          menu.setAttribute('aria-hidden', String(!open));
          btn.setAttribute('aria-expanded', String(open));
        });
        document.addEventListener('click', e=>{
          if(!e.target.closest('.anarchyBtn') && !e.target.closest('.anarchyMenu')){
            menu.classList.remove('open');
            menu.setAttribute('aria-hidden','true');
            btn.setAttribute('aria-expanded','false');
          }
        });
      }

      // init
      window.addEventListener('DOMContentLoaded', ()=>{
        startSmoke();
        enterNormal();
        setTimeout(()=> { intervalId = setInterval(togglePhase, PHASE); }, 160);
        document.addEventListener('visibilitychange', ()=> { if(!document.hidden) startSmoke(); });
      });

      window.addEventListener('beforeunload', ()=> { clearInterval(intervalId); clearTimeout(popTimer); clearTimeout(flashTimer); });

      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)');
      if(prefersReduced.matches) document.documentElement.style.setProperty('--phase','1500');
    })();
  </script>
</body>
</html>
