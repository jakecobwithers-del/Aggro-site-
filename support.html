<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aggro PvP — Support</title>

  <style>
    /* site font (expects font file in same folder or site root) */
    @font-face{
      font-family:'28DaysLater';
      src: url('28%20Days%20Later.ttf') format('truetype'), url('28DaysLater.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    :root{
      --accent:#ff3c3c;
      --muted:#bdbdbd;
      --card-w:1000px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:transparent}
    body{
      font-family:'28DaysLater', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:#fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Full-bleed smoke video container (placed directly under <body>) */
    #smoke-bg{
      position:fixed;
      inset:0;
      z-index:-9999;
      pointer-events:none;
      overflow:hidden;
      background:#000;
    }
    #smoke-bg video{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:auto;
      height:120%;
      min-width:100%;
      min-height:100%;
      object-fit:cover;
      display:block;
      pointer-events:none;
      filter:brightness(0.55) contrast(1);
    }

    /* Page content sits above the video but remains visually transparent */
    .page{position:relative;z-index:0;min-height:100vh}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:6vh 20px}

    /* Transparent card so smoke shows through — readable text via shadows */
    .card{
      width:100%;
      max-width:var(--card-w);
      background:transparent;
      border-radius:12px;
      padding:36px;
      box-shadow:none;
      border:0;
      color:#fff;
      text-align:center;
    }
    @media(max-width:520px){ .card{padding:20px;border-radius:10px} }

    h1{margin:0 0 12px 0;font-size:48px;color:var(--accent);font-weight:900;text-shadow:0 6px 20px rgba(0,0,0,0.85);line-height:0.95}
    .lead{margin:0 0 18px 0;font-size:16px;color:#fff;opacity:0.98;text-shadow:0 2px 6px rgba(0,0,0,0.6)}

    .grid{display:block;max-width:780px;margin:0 auto}
    .channel{display:flex;gap:12px;align-items:flex-start;padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
    .num{width:44px;color:var(--accent);font-weight:800;text-align:center}
    .desc{font-size:15px;color:#fff;text-shadow:0 2px 8px rgba(0,0,0,0.6)}

    .owners{margin-top:18px;display:flex;flex-direction:column;gap:8px;align-items:center}
    .owner{display:flex;align-items:center;gap:12px}
    .owner .avatar{width:48px;height:48px;border-radius:8px;background:#222;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    .owner .label{font-weight:800;text-shadow:0 2px 8px rgba(0,0,0,0.6)}

    .back{display:inline-block;margin-top:22px;color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:8px}

    /* Fallback when video cannot play: use poster image as page background */
    body.no-video .page{background-image:url('smoke-poster.jpg');background-size:cover;background-position:center}
    @media(max-width:600px){ h1{font-size:34px} .card{padding:22px} .owner .avatar{width:40px;height:40px} }
  </style>
</head>
<body>
  <!-- Full-bleed smoke (ensure exact filename and casing: "Smoke.mp4") -->
  <div id="smoke-bg" aria-hidden="true">
    <video id="smoke-vid" autoplay muted loop playsinline preload="auto" poster="smoke-poster.jpg">
      <source src="Smoke.mp4" type="video/mp4">
      <source src="Smoke.webm" type="video/webm">
    </video>
  </div>

  <main class="page" role="main">
    <div class="wrap">
      <section class="card" aria-labelledby="support-title">
        <header role="banner" aria-label="Aggro PvP">
          <h1 id="support-title">Support</h1>
          <p class="lead">Report bugs, open tickets, or drop suggestions in the Discord channels below.</p>
        </header>

        <section class="grid" role="list">
          <div class="channel" role="listitem">
            <div class="num">1</div>
            <div class="desc"><a href="https://discord.com/channels/1375728051194957874/1385078265236160563" target="_blank" rel="noopener noreferrer">#bug-reports</a> — Report bugs or exploits.</div>
          </div>

          <div class="channel" role="listitem">
            <div class="num">2</div>
            <div class="desc"><a href="https://discord.com/channels/1375728051194957874/1385079306350493766" target="_blank" rel="noopener noreferrer">#suggestions</a> — Post ideas and feedback.</div>
          </div>

          <div class="channel" role="listitem">
            <div class="num">3</div>
            <div class="desc"><a href="https://discord.com/channels/1375728051194957874/1385461796437233695" target="_blank" rel="noopener noreferrer">#ticket</a> — Open a private ticket for support.</div>
          </div>

          <div class="owners" role="group" aria-labelledby="owners-heading">
            <h2 id="owners-heading" style="color:var(--accent);margin:12px 0 6px 0;font-size:18px">Server Owners</h2>

            <div class="owner">
              <div class="avatar" id="av-572334">R</div>
              <div class="label">RB Skizza — Owner</div>
            </div>

            <div class="owner">
              <div class="avatar" id="av-842365">S</div>
              <div class="label">Slomobob — Co Owner</div>
            </div>
          </div>

          <a class="back" href="index.html">← Back to menu</a>
        </section>
      </section>
    </div>
  </main>

  <script>
    (function(){
      // Video play/fallback logic (mirrors working rules page behavior)
      const vid = document.getElementById('smoke-vid');
      let played = false;
      if (vid){
        vid.addEventListener('playing', ()=> played = true);
        vid.addEventListener('error', ()=> document.body.classList.add('no-video'));
        // some browsers require a short delay before attempting play
        setTimeout(()=>{ if (!played) vid.play().catch(()=> document.body.classList.add('no-video')); }, 700);
      } else {
        document.body.classList.add('no-video');
      }

      // Try to load owner avatars; falls back to letter avatars if remote fetch blocked
      async function testHead(url){ try{ const r = await fetch(url, { method:'HEAD', cache:'no-store' }); return r.ok; } catch(e){ return false; } }
      async function applyAvatar(elId, id){
        const el = document.getElementById(elId);
        if (!el) return;
        const candidates = [
          `https://cdn.discordapp.com/avatars/${id}.webp`,
          `https://cdn.discordapp.com/avatars/${id}.png`,
          `https://cdn.discordapp.com/avatars/${id}.jpg`
        ];
        for (const url of candidates){
          if (await testHead(url)){ el.style.backgroundImage = `url(${url})`; el.textContent=''; return; }
        }
      }
      applyAvatar('av-572334','572334717731602462').catch(()=>{});
      applyAvatar('av-842365','842365557486518302').catch(()=>{});

      // Optional quick diagnostics: open console to inspect these logs if video still black
      (async function diag(){
        const urls = ['Smoke.mp4','Smoke.webm','smoke-poster.jpg'];
        for (const u of urls){
          try{
            const r = await fetch(u, { method:'HEAD', cache:'no-store' });
            console.log(u, '→', r.status, 'content-type:', r.headers.get('content-type'));
          }catch(e){
            console.log(u, '→ HEAD failed', e && e.message);
          }
        }
      })();
    })();
  </script>
</body>
</html>